<BoxLayout>:
    control_text_width: 200


BoxLayout:
    orientation: 'vertical'

    # Image taking top half of the window
    Image:
        size_hint_y: 0.45  # Top half of the window
        source: 'Temp pic.png'  # Use your image here

    # Main Content Area
    BoxLayout:
        orientation: 'horizontal'
        size_hint_y: 0.5  # Bottom half of the window
        padding: 10

        # Left Side with Range Slider and Number Inputs
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.5
            spacing: 10

            # Custom Range Slider (Start and Stop Sliders) with Title
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: '48dp'
                spacing: 10

                MDLabel:
                    text: "Frequency Range [kHz]: "
                    size_hint_x: None
                    width: root.control_text_width

                MDSlider:
                    id: slider_start
                    min: 0
                    max: 100
                    value: app.start_value
                    step: 1
                    on_value: app.update_slider_values_from_slider('start', self.value)

                MDSlider:
                    id: slider_stop
                    min: 0
                    max: 100
                    value: app.stop_value
                    step: 1
                    on_value: app.update_slider_values_from_slider('stop', self.value)

            # Input Fields for Start and Stop Values
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: '48dp'
                spacing: 10

                MDLabel:
                    text: "Start Frequency [kHz]: "
                    size_hint_x: None
                    width: root.control_text_width

                MDTextField:
                    id: start_input
                    hint_text: "Enter start frequency"
                    text: str(app.start_value)
                    input_filter: 'int'
                    on_text_validate: app.set_start_value(self.text)

            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: '48dp'
                spacing: 10

                MDLabel:
                    text: "Stop Frequency [kHz]: "
                    size_hint_x: None
                    width: root.control_text_width

                MDTextField:
                    id: stop_input
                    hint_text: "Enter stop frequency"
                    text: str(app.stop_value)
                    input_filter: 'int'
                    on_text_validate: app.set_stop_value(self.text)

            # Traces Dropdown Menu
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: '48dp'
                spacing: 10

                MDLabel:
                    text: "Traces: "
                    size_hint_x: None
                    width: root.control_text_width

                MDDropDownItem:
                    id: traces_dropdown
                    text: "Average"  # Set default value
                    on_release: app.menu_traces.open()

            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: '48dp'
                spacing: 10

                MDLabel:
                    text: "RBW [kHz]: "
                    size_hint_x: None
                    width: root.control_text_width

                MDTextField:
                    hint_text: "Enter RBW"
                    input_filter: 'float'

            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: '48dp'
                spacing: 10

                MDLabel:
                    text: "VBW [kHz]: "
                    size_hint_x: None
                    width: root.control_text_width

                MDTextField:
                    hint_text: "Enter VBW"
                    input_filter: 'float'

            # Test type Dropdown Menu
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: '48dp'

                MDLabel:
                    text: "Test type: "
                    size_hint_x: None
                    width: root.control_text_width

                MDDropDownItem:
                    id: test_type_dropdown
                    text: "Full range"  # Set default value
                    on_release: app.menu_test_type.open()

        # Right Side with Coupling and Average type dropdowns and Number Inputs
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.5
            padding: 10
            spacing: 10

            # Impedance Input at the top
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: '48dp'
                spacing: 10

                MDLabel:
                    text: "Impedance [ohm]: "
                    size_hint_x: None
                    width: root.control_text_width

                MDTextField:
                    hint_text: "Enter impedance"
                    input_filter: 'int'

            # Coupling Dropdown
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: '48dp'

                MDLabel:
                    text: "Coupling: "
                    size_hint_x: None
                    width: root.control_text_width

                MDDropDownItem:
                    id: coupling_dropdown
                    text: "AC"  # Set default value
                    on_release: app.menu_coupling.open()

            # Average Type Dropdown
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: '48dp'

                MDLabel:
                    text: "Average type: "
                    size_hint_x: None
                    width: root.control_text_width

                MDDropDownItem:
                    id: avg_type_dropdown
                    text: "Log"  # Set default value
                    on_release: app.menu_avg_type.open()

            # Number inputs for Attenuation, Reference Level, and Y Reference Level
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: '48dp'
                spacing: 10

                MDLabel:
                    text: "Attenuation [dB]: "
                    size_hint_x: None
                    width: root.control_text_width

                MDTextField:
                    hint_text: "Enter attenuation"
                    input_filter: 'float'

            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: '48dp'
                spacing: 10

                MDLabel:
                    text: "Reference Level [dBm]: "
                    size_hint_x: None
                    width: root.control_text_width

                MDTextField:
                    hint_text: "Enter reference level"
                    input_filter: 'float'

            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: '48dp'
                spacing: 10

                MDLabel:
                    text: "Y Reference Level [dBm]: "
                    size_hint_x: None
                    width: root.control_text_width

                MDTextField:
                    hint_text: "Enter Y reference level"
                    input_filter: 'float'


    # Buttons centered at the bottom
    BoxLayout:
        orientation: 'horizontal'
        size_hint_y: None
        size_hint_x: 1
        height: '50dp'
        spacing: 50
        padding: 10
        # Center the buttons
        pos_hint: {"center_x": 0.5, "center_y": 0}  # Center horizontally at the bottom

        MDRaisedButton:
            text: "Config"
            size_hint_x: 0.25
            on_release: app.config_spectrum()

        MDRaisedButton:
            text: "Reset"
            size_hint_x: 0.25
            on_release: app.reset_spectrum()

        MDRaisedButton:
            text: "Run"
            size_hint_x: 0.25
            on_release: app.run_traces()

        MDRaisedButton:
            text: "Stop"
            size_hint_x: 0.25
            on_release: app.stop_traces()
